......................................................................ss [ 66%]
.........FF..FFEE....................                                    [100%]
=================================== ERRORS ====================================
____ ERROR at setup of TestSharedFixtures.test_orchestrator_initialization ____
tests\test_resilience.py:204: in orchestrator
    return ScrapingOrchestrator(
E   TypeError: ScrapingOrchestrator.__init__() got an unexpected keyword argument 'allowed_domain'
_________ ERROR at setup of TestSharedFixtures.test_queue_operations __________
tests\test_resilience.py:204: in orchestrator
    return ScrapingOrchestrator(
E   TypeError: ScrapingOrchestrator.__init__() got an unexpected keyword argument 'allowed_domain'
================================== FAILURES ===================================
______ TestDeduplicationResilience.test_content_hash_duplicate_detection ______
tests\test_resilience.py:19: in test_content_hash_duplicate_detection
    result1 = ScrapeResult(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for ScrapeResult
E   status
E     Field required [type=missing, input_value={'url': 'https://example....content_hash': 'abc123'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.11/v/missing
____ TestDeduplicationResilience.test_fuzzy_duplicate_with_high_similarity ____
tests\test_resilience.py:47: in test_fuzzy_duplicate_with_high_similarity
    result1 = ScrapeResult(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for ScrapeResult
E   status
E     Field required [type=missing, input_value={'url': 'https://example....'content_hash': 'hash1'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.11/v/missing
___________ TestOrchestratorTimeout.test_orchestrator_cancellation ____________
tests\test_resilience.py:116: in test_orchestrator_cancellation
    orchestrator = ScrapingOrchestrator(
E   TypeError: ScrapingOrchestrator.__init__() got an unexpected keyword argument 'allowed_domain'
____________ TestOrchestratorTimeout.test_worker_timeout_handling _____________
tests\test_resilience.py:150: in test_worker_timeout_handling
    orchestrator = ScrapingOrchestrator(
E   TypeError: ScrapingOrchestrator.__init__() got an unexpected keyword argument 'allowed_domain'
============================== warnings summary ===============================
tests/test_cli.py::test_cli_crawl_and_export
  C:\Users\DELL\AppData\Local\Programs\Python\Python312\Lib\site-packages\dataset\table.py:669: RemovedIn20Warning: Deprecated API features detected! These feature(s) are not compatible with SQLAlchemy 2.0. To prevent incompatible upgrades prior to updating applications, ensure requirements files are pinned to "sqlalchemy<2.0". Set environment variable SQLALCHEMY_WARN_20=1 to show all deprecation warnings.  Set environment variable SQLALCHEMY_SILENCE_UBER_WARNING=1 to silence this message. (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    query = select([func.count()], whereclause=args)

tests/test_orchestrator.py::test_worker_dynamic_llm_schema_loading
  C:\Users\DELL\Desktop\PythonWebScraper\tests\test_orchestrator.py:458: PydanticDeprecatedSince20: The `__fields__` attribute is deprecated, use `model_fields` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    assert "name" in getattr(model_cls, '__fields__', {})

tests/test_orchestrator.py::test_worker_dynamic_llm_schema_loading
  C:\Users\DELL\Desktop\PythonWebScraper\tests\test_orchestrator.py:459: PydanticDeprecatedSince20: The `__fields__` attribute is deprecated, use `model_fields` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    assert "price" in getattr(model_cls, '__fields__', {})

tests/test_rl_agent.py::test_rl_agent_get_action_decrease_backoff
tests/test_rl_agent.py::test_rl_agent_get_action_no_change
tests/test_rl_agent.py::test_rl_agent_get_action_increase_backoff
  C:\Users\DELL\Desktop\PythonWebScraper\src\rl_agent.py:162: DeprecationWarning: Conversion of an array with ndim > 0 to a scalar is deprecated, and will error in future. Ensure you extract a single element from your array before performing this operation. (Deprecated NumPy 1.25.)
    action_val = int(action) if isinstance(action, (np.ndarray, list)) else int(action)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
SKIPPED [1] tests\test_orchestrator_logic.py:17: Test para la l¾gica de reintentos del orquestador a·n no implementado.
SKIPPED [1] tests\test_orchestrator_logic.py:28: Test para el respeto de robots.txt a·n no implementado.
ERROR tests/test_resilience.py::TestSharedFixtures::test_orchestrator_initialization
ERROR tests/test_resilience.py::TestSharedFixtures::test_queue_operations - T...
FAILED tests/test_resilience.py::TestDeduplicationResilience::test_content_hash_duplicate_detection
FAILED tests/test_resilience.py::TestDeduplicationResilience::test_fuzzy_duplicate_with_high_similarity
FAILED tests/test_resilience.py::TestOrchestratorTimeout::test_orchestrator_cancellation
FAILED tests/test_resilience.py::TestOrchestratorTimeout::test_worker_timeout_handling
